<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∫–µ—Ä –Ω–∞ –∫–æ—Å—Ç—è—Ö ‚Äî –£–¥–æ–±–Ω–∞—è –¢–∞–±–ª–∏—Ü–∞</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #27ae60;
            --bg: #f0f2f5;
            --text: #222;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 15px;
            font-size: 18px; /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –±–∞–∑–æ–≤—ã–π —à—Ä–∏—Ñ—Ç */
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 { text-align: center; color: var(--primary); margin-bottom: 20px; }

        .controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
        }

        input[type="text"] {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            flex-grow: 1;
            font-size: 18px;
        }

        button.add-btn {
            padding: 12px 25px;
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }

        .boards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .player-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            padding: 20px;
            border-top: 8px solid var(--primary);
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .player-header h2 { margin: 0; font-size: 24px; color: var(--primary); }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        .category-name {
            font-weight: 500;
            color: #444;
            font-size: 19px;
        }

        /* –ü–æ–ª—è –≤–≤–æ–¥–∞ */
        .score-input {
            width: 70px;
            padding: 8px;
            border: 2px solid #ccc;
            border-radius: 6px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        /* –ö–Ω–æ–ø–∫–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—á–∫–æ–≤ */
        .fix-score-btn {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #a5d6a7;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            width: 100%;
        }

        .fix-score-btn:hover { background: #c8e6c9; }

        /* –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ */
        .completed-section {
            background-color: #fafafa;
            opacity: 0.6;
        }
        
        .completed-section .category-name {
            text-decoration: line-through;
            color: #888;
        }

        .section-divider {
            background: #f8f9fa;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            padding: 10px 0;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .total-row {
            background: #2c3e50 !important;
            color: white;
            font-size: 22px;
            font-weight: bold;
        }

        .total-val { color: #2ecc71; text-align: center; }

        .delete-btn {
            background: none;
            border: none;
            color: #e74c3c;
            cursor: pointer;
            font-size: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>üé≤ –ü–æ–∫–µ—Ä –Ω–∞ –∫–æ—Å—Ç—è—Ö</h1>
    
    <div class="controls">
        <input type="text" id="playerName" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–≥—Ä–æ–∫–∞...">
        <button class="add-btn" onclick="addPlayer()">–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</button>
    </div>

    <div id="boards" class="boards-grid"></div>
</div>

<script>
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: fixed - –µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∞–ª–ª
    const categories = [
        { id: 'ones', name: '–ï–¥–∏–Ω–∏—Ü—ã', fixed: null },
        { id: 'twos', name: '–î–≤–æ–π–∫–∏', fixed: null },
        { id: 'threes', name: '–¢—Ä–æ–π–∫–∏', fixed: null },
        { id: 'fours', name: '–ß–µ—Ç–≤–µ—Ä–∫–∏', fixed: null },
        { id: 'fives', name: '–ü—è—Ç–µ—Ä–∫–∏', fixed: null },
        { id: 'sixes', name: '–®–µ—Å—Ç–µ—Ä–∫–∏', fixed: null },
        { id: 'pair', name: '–ü–∞—Ä–∞', fixed: null },
        { id: 'set3', name: '–°–µ—Ç (3 –æ–¥–Ω.)', fixed: null },
        { id: 'set4', name: '–ö–∞—Ä–µ (4 –æ–¥–Ω.)', fixed: null },
        { id: 'fullhouse', name: '–§—É–ª–ª-—Ö–∞—É—Å', fixed: 25 },
        { id: 'smallStr', name: '–ú. –°—Ç—Ä–∏—Ç (4)', fixed: 30 },
        { id: 'largeStr', name: '–ë. –°—Ç—Ä–∏—Ç (5)', fixed: 40 },
        { id: 'poker', name: '–ü–æ–∫–µ—Ä (5 –æ–¥–Ω.)', fixed: 50 },
        { id: 'chance', name: '–®–∞–Ω—Å', fixed: null }
    ];

    function addPlayer() {
        const nameInput = document.getElementById('playerName');
        const name = nameInput.value.trim();
        if (!name) return;

        const boardId = 'p' + Date.now();
        const boardsContainer = document.getElementById('boards');

        const card = document.createElement('div');
        card.className = 'player-card';
        card.id = boardId;

        let rowsHtml = '';
        categories.forEach(cat => {
            let inputField = cat.fixed 
                ? `<button class="fix-score-btn" onclick="setFixedScore('${boardId}', '${cat.id}', ${cat.fixed})">${cat.fixed}</button>`
                : `<input type="number" class="score-input" onchange="updateScore('${boardId}', '${cat.id}')" placeholder="0">`;

            rowsHtml += `
                <tr id="${boardId}-${cat.id}" data-category="${cat.id}">
                    <td class="category-name">${cat.name}</td>
                    <td id="cell-${boardId}-${cat.id}">${inputField}</td>
                </tr>
            `;
        });

        card.innerHTML = `
            <div class="player-header">
                <h2>${name}</h2>
                <button class="delete-btn" onclick="document.getElementById('${boardId}').remove()">‚úï</button>
            </div>
            <table>
                <tbody class="available-rows">${rowsHtml}</tbody>
                <tbody class="divider-body" style="display:none">
                    <tr><td colspan="2" class="section-divider">–ó–∞–ø–æ–ª–Ω–µ–Ω–æ</td></tr>
                </tbody>
                <tbody class="completed-rows"></tbody>
                <tfoot>
                    <tr class="total-row">
                        <td>–ò–¢–û–ì–û</td>
                        <td class="total-val" id="total-${boardId}">0</td>
                    </tr>
                </tfoot>
            </table>
        `;

        boardsContainer.appendChild(card);
        nameInput.value = '';
    }

    // –î–ª—è –ø–æ–ª–µ–π —Å —Ä—É—á–Ω—ã–º –≤–≤–æ–¥–æ–º
    function updateScore(boardId, catId) {
        const row = document.getElementById(`${boardId}-${catId}`);
        const input = row.querySelector('input');
        
        if (input && input.value !== "") {
            moveToCompleted(boardId, row);
        } else {
            moveToAvailable(boardId, row);
        }
        calculateTotal(boardId);
    }

    // –î–ª—è –ø–æ–ª–µ–π —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –Ω–∞–∂–∞—Ç–∏–µ–º
    function setFixedScore(boardId, catId, score) {
        const row = document.getElementById(`${boardId}-${catId}`);
        const cell = document.getElementById(`cell-${boardId}-${catId}`);
        
        // –ó–∞–º–µ–Ω—è–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω—ã
        cell.innerHTML = `<span class="score-input" style="border:none; cursor:pointer" onclick="resetFixedScore('${boardId}','${catId}',${score})">${score}</span>`;
        
        moveToCompleted(boardId, row);
        calculateTotal(boardId);
    }

    // –°–±—Ä–æ—Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—è
    function resetFixedScore(boardId, catId, score) {
        const row = document.getElementById(`${boardId}-${catId}`);
        const cell = document.getElementById(`cell-${boardId}-${catId}`);
        cell.innerHTML = `<button class="fix-score-btn" onclick="setFixedScore('${boardId}', '${catId}', ${score})">${score}</button>`;
        
        moveToAvailable(boardId, row);
        calculateTotal(boardId);
    }

    function moveToCompleted(boardId, row) {
        const card = document.getElementById(boardId);
        const completedBody = card.querySelector('.completed-rows');
        const divider = card.querySelector('.divider-body');
        
        row.classList.add('completed-section');
        completedBody.appendChild(row);
        divider.style.display = 'table-row-group';
    }

    function moveToAvailable(boardId, row) {
        const card = document.getElementById(boardId);
        const availableBody = card.querySelector('.available-rows');
        const completedBody = card.querySelector('.completed-rows');
        const divider = card.querySelector('.divider-body');

        row.classList.remove('completed-section');
        availableBody.appendChild(row);
        
        if (completedBody.children.length === 0) {
            divider.style.display = 'none';
        }
    }

    function calculateTotal(boardId) {
        const card = document.getElementById(boardId);
        let total = 0;
        
        // –°—á–∏—Ç–∞–µ–º –≤—Å–µ —á–∏—Å–ª–∞ –≤ –∏–Ω–ø—É—Ç–∞—Ö –∏ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—è—Ö (–ø–æ—Å–ª–µ —Ñ–∏–∫—Å–∞—Ü–∏–∏)
        card.querySelectorAll('.score-input').forEach(el => {
            let val = (el.tagName === 'INPUT') ? parseInt(el.value) : parseInt(el.innerText);
            if (!isNaN(val)) total += val;
        });

        document.getElementById(`total-${boardId}`).innerText = total;
    }

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ Enter
    document.getElementById('playerName').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') addPlayer();
    });
</script>

</body>
</html>